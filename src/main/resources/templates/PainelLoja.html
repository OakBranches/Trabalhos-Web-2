<html  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
       xmlns:th="http://www.thymeleaf.org"
       xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity"
       layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

</head>
<body>
<div layout:fragment="header_home" style="" class=""></div>

<div layout:fragment="corpo" >
    <div th:each="carro : ${carros}" class="row justify-content-center align-items-center">
        <br>
        <div style="width: fit-content">
        <table border="1" class="col table table-striped table-hover table-bordered align-middle position-relative" style="width: fit-content; border: 1px solid black;border-radius: 10px;">
            <thead class="bg-success">
            <tr>
                <td class="bg-primary">Imagem</td>
                <td class="bg-primary">Modelo</td>
                <td class="bg-primary">Placa</td>
                <td class="bg-primary">Chassi</td>
                <td class="bg-primary">Descrição</td>
                <td class="bg-primary">Ano</td>
                <td class="bg-primary">Km</td>
                <td class="bg-primary">Valor</td>
                <td class="bg-primary">Loja</td>
                <td class="bg-primary">Propor</td>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td> <span>Imagem</span>

                </td>
                <td> <span th:text="${carro.modelo}"></span></td>
                <td> <span th:text="${carro.placa}"></span></td>
                <td> <span th:text="${carro.chassi}"></span></td>
                <td> <span th:text="${carro.descricao}"></span></td>
                <td> <span th:text="${carro.ano}"></span></td>
                <td> <span th:text="${carro.km}"></span></td>
                <td> <span th:text="${carro.valor}"></span></td>
                <td> <span th:text="${carro.loja.nome}"></span></td>
                <td>
                    <a class="btn btn-info btn-sm" th:href="@{/proposta/create/{id} (id=${carro.id}) }"
                       role="button">
                        <ion-icon name="bookmark-outline"></ion-icon>
                    </a>
                </td>
            </tr>
            <tr >
                <td th:colspan="10">
                <div class="accordion" th:id="${'accordionExample' + carro.id}">
                    <div class="accordion-item">
                        <h2 class="accordion-header"  th:id="${'headingOne' + carro.id}">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" th:data-bs-target="${'#collapseOne' + carro.id}" aria-expanded="false" th:aria-controls="${'collapseOne' + carro.id}">
                                Propostas para este veiculo
                            </button>
                        </h2>
                        <div th:id="${'collapseOne' + carro.id}" class="accordion-collapse collapse" th:aria-labelledby="${'headingOne' + carro.id}" th:data-bs-parent="${'#accordionExample' + carro.id}">
                            <div class="accordion-body row justify-content-center align-items-center">
                                <div style="width: fit-content">
                                <table border="1" style="width: fit-content; border: 1px solid black">
                                    <thead class="bg-success">
                                    <tr>
                                        <td class="bg-primary" th:text="#{modelo}"></td>
                                        <td class="bg-primary" th:text="#{valor}"></td>
                                        <td class="bg-primary" th:text="#{dataProp}"></td>
                                        <td class="bg-primary"> LOJA </td>
                                        <td class="bg-primary" th:text="#{km}"></td>
                                        <td class="bg-primary" th:text="#{descricao}"></td>
                                        <td class="bg-primary" th:text="#{status}"></td>
                                        <td class="bg-primary" th:text="#{aceitar}"></td>
                                        <td class="bg-primary" th:text="#{recusar}"></td>

                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr th:each="proposta: ${carro.propostas}">
                                        <td> <span th:text="${proposta.carro.getModelo()}"></span></td>
                                        <td> <span th:text="${proposta.valor}"></span></td>
                                        <td> <span th:text="${proposta.getDataStr()}"></span></td>
                                        <td> <span th:text="${proposta.carro.loja.getNome()}"></span></td>
                                        <td> <span th:text="${proposta.carro.km}"></span></td>
                                        <td> <span th:text="${proposta.carro.descricao}"></span></td>
                                        <td> <span th:text="${proposta.getStatus() == 0? 'ABERTO' : (proposta.getStatus() == 1? 'ACEITO': 'NÃO ACEITO')}"></span></td>

                                        <td th:if="${proposta.status == 0}"> <a th:href="@{'/proposta/accept/'+${proposta.id}}">aceitar</a></td>
                                        <td th:if="${proposta.status == 0}"> <a th:href="@{'/proposta/reject/'+${proposta.id}}">rejeitar</a></td>
                                    </tr>
                                    </tbody>
                                </table>

                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                </td>

            </tr>
            </tbody>
        </table>
        </div>

    </div>

</div>
</body>
</html>